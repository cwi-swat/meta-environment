# The following variables are instantiated using the configure script
# generated by autoconf:

PRODUCT		= @PRODUCT@
VERSION		= @VERSION@

srcdir		= @srcdir@
VPATH		= @srcdir@
top_srcdir      = @top_srcdir@

prefix          = @prefix@
exec_prefix     = @exec_prefix@
bindir          = $(exec_prefix)/bin
libdir          = $(exec_prefix)/lib
docdir		= $(top_srcdir)/doc
includedir      = $(prefix)/include
classdir	= $(prefix)/classes

SHELL		= /bin/sh

INSTALL		= @INSTALL@
CLEAN		= @CLEAN@
NOWEB		= @NOWEB@

DISTFILES	= Makefile.in $(SOURCE)
INSTALLDIR	= ${top_srcdir}/../${PRODUCT}-${VERSION}/adapters/java-adapter
COMPONENT	= toolbus/tide

SOURCE		= DebugPort.java LocationPort.java ExecStatePort.java \
		ExceptionPort.java ProcessCreationPort.java \
		ProcessDestructionPort.java SendPort.java ReceivePort.java \
		DebugRule.java \
		DebugAdapterInfo.java SourceArea.java DebugProcess.java \
		DebuggerProcess.java \
		RemoteDebugAdapterInfo.java \
		$(TOOLSOURCE)
TOOLSOURCE	= ProcessViewerTif.java ProcessViewerTool.java \
		ProcessViewer.java \
		DebugAdapterTif.java DebugAdapterTool.java \
		JavaDebugger.java SourceViewerTif.java SourceViewerTool.java \
		WatchpointViewerTif.java WatchpointViewerTool.java \
		DebugProcessGroup.java StringDialog.java
CLASSES		= DebugPort.class LocationPort.class ExecStatePort.class \
		ExceptionPort.class ProcessCreationPort.class \
		ProcessDestructionPort.class SendPort.class ReceivePort.class\
		DebugRule.class DebuggerProcess.class \
		DebugAdapterInfo.class SourceArea.class DebugProcess.class \
		RemoteDebugAdapterInfo.class \
		$(TOOLCLASSES)
TOOLCLASSES	= ProcessViewerTif.class ProcessViewerTool.class \
		ProcessViewer.class ProcessCanvas.class DapPicture.class \
		MsgPicture.class \
		ProcessPicture.class ProcessPanel.class \
		AdapterPanel.class SelectionPanel.class \
		ProcessViewerMenuBar.class ToolMenuItem.class \
		DebugAdapterTif.class DebugAdapterTool.class \
		JavaDebugger.class SourceViewerTif.class \
		SourceViewerTool.class SourceViewer.class TextBrowser.class \
		TextBrowserCanvas.class TextLine.class Tag.class \
		TextHandler.class StringDialog.class \
		WatchpointViewerTif.class WatchpointViewerTool.class \
		DebugProcessGroup.class DebugProcessGroupAll.class \
		DebugProcessGroupNone.class DebugProcessGroupOne.class \
		DebugProcessGroupList.class
PROGRAMS	=

JAVATIF		= java -classpath $(top_srcdir)/adapters/java-adapter:$$CLASSPATH toolbus.tool.JavaTif

all:	${CLASSES}

%.class: %.java
	javac -classpath ../..:$$CLASSPATH $<

ProcessViewerTif.java: $(top_srcdir)/tide/tide.tifs
	$(JAVATIF) -package toolbus.tide -class ProcessViewerTif \
		-tool process-viewer -tifs $(top_srcdir)/tide/tide.tifs

DebugAdapterTif.java: $(top_srcdir)/tide/tide.tifs
	$(JAVATIF) -package toolbus.tide -class DebugAdapterTif \
		-tool debug-adapter -tifs $(top_srcdir)/tide/tide.tifs

SourceViewerTif.java: $(top_srcdir)/tide/tide.tifs
	$(JAVATIF) -package toolbus.tide -class SourceViewerTif  \
		-tool source-viewer -tifs $(top_srcdir)/tide/tide.tifs

WatchpointViewerTif.java: $(top_srcdir)/tide/tide.tifs
	$(JAVATIF) -package toolbus.tide -class WatchpointViewerTif \
		-tool watchpoint-viewer -tifs $(top_srcdir)/tide/tide.tifs

# The rules below this line are general rules and are based on the
# defines listed above. You probably won't have to change them.

clean:
	${CLEAN} ${CLASSES}

distclean: clean
	${CLEAN} Makefile

dist: $(DISTFILES)
	@for file in $(DISTFILES); do \
	  ln $(srcdir)/$$file ${INSTALLDIR}/$(COMPONENT) 2> /dev/null \
	  || cp $(srcdir)/$$file ${INSTALLDIR}/$(COMPONENT); \
	done

install: $(PROGRAMS) $(CLASSES)
	@-mkdir $(classdir)/$(COMPONENT)
	for file in $(CLASSES); do\
	  $(INSTALL) $$file $(classdir)/$(COMPONENT); \
	done
#	for file in $(PROGRAMS); do\
#	  $(INSTALL) $$file $(bindir); \
#	done
 

doc:

uninstall:
	for file in $(PROGRAMS); do\
	  rm -f $(bindir)/$$file; \
	done
	for file in $(CLASSES); do\
	  rm -f $(classdir)/$(COMPONENT)/$$file;\
	done 

