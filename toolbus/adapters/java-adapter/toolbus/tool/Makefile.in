# The following variables are instantiated using the configure script
# generated by autoconf:

PRODUCT		= @PRODUCT@
VERSION		= @VERSION@

srcdir		= @srcdir@
VPATH		= @srcdir@
top_srcdir      = @top_srcdir@

prefix          = @prefix@
exec_prefix     = @exec_prefix@
bindir		= @bindir@
libdir		= @libdir@
docdir		= $(top_srcdir)/doc
includedir      = $(prefix)/include
classdir	= $(prefix)/classes

SHELL		= /bin/sh

INSTALL		= @INSTALL@
CLEAN		= @CLEAN@
NOWEB		= @NOWEB@

DISTFILES	= Makefile.in $(SOURCE) javatif test.tb 
INSTALLDIR	= ${top_srcdir}/../${PRODUCT}-${VERSION}/adapters/java-adapter
COMPONENT	= toolbus/tool

SOURCE		= Tool.java JavaTif.java Test.java TestTool.java \
		Testing.java TestingTool.java ToolException.java
		
CLASSES		= Tool.class JavaTif.class Test.class TestTool.class \
		Testing.class TestingTool.class ToolException.class \
		$(PRIVCLASSES)
PRIVCLASSES	= EventQueue.class SpecOrderVector.class TifGenerator.class \
		ToolBusChannel.class
PROGRAMS	= javatif

all:	${CLASSES}

%.class: %.java
	javac -classpath ../..:$$CLASSPATH $<

%.tifs: %.tb
	$(top_srcdir)/src/toolbus -gentifs $<

Testing.java: test.tifs
	java -classpath ../..:$$CLASSPATH toolbus.tool.JavaTif -tool testing -tifs test.tifs -package toolbus.tool

clean:
	${CLEAN} ${CLASSES}

distclean: clean
	${CLEAN} Makefile

dist: $(DISTFILES)
	@for file in $(DISTFILES); do \
	  ln $(srcdir)/$$file ${INSTALLDIR}/$(COMPONENT) 2> /dev/null \
	  || cp $(srcdir)/$$file ${INSTALLDIR}/$(COMPONENT); \
	done

install: $(PROGRAMS) $(CLASSES)
	-mkdir $(classdir)/$(COMPONENT)
	for file in $(PROGRAMS); do\
	  $(INSTALL) $$file $(bindir); \
	done
	for file in $(CLASSES); do\
	  $(INSTALL) $$file $(classdir)/$(COMPONENT); \
	done

doc:

uninstall:
	for file in $(PROGRAMS); do\
	  rm -f $(bindir)/$$file; \
	done
	for file in $(CLASSES); do\
	  rm -f $(classdir)/$(COMPONENT)/$$file;\
	done 

