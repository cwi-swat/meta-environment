# @configure_input@
# doc

PRODUCT		= @PRODUCT@
VERSION		= @VERSION@

srcdir		= @srcdir@
VPATH		= @srcdir@
top_srcdir	= @top_srcdir@
prefix		= @prefix@
exec_prefix	= @exec_prefix@
bindir		= @bindir@
libdir		= @libdir@
includedir	= $(prefix)/include

CC		= @CC@
SHELL		= /bin/sh
CFLAGS		= @CFLAGS@
INCLUDES	= @INCLUDES@ -I$(includedir)
LIBS		= @LIBS@
TBLIB		= $(libdir)/libtb.a

ADAPTERS	= @ADAPTERS@

CLEAN		= @CLEAN@

.SUFFIXES:
.SUFFIXES: .c .o

DOCUMENTS	= Guide.ps.gz Intro.ps pamflet.ps

DISTFILES	= Makefile.in Guide.tex Intro.tex pamflet.tex \
		  Arch.pic Arch.tex \
		  Tool.pic Tool.tex \
		  Tifs.pic Tifs.tex \
		  Adapter.pic Adapter.tex \
		  Syntax-T-scripts.tex \
		  psfig.tex \
		  calc.fig calc-ui.eps auction.fig auction-bidder.eps \
		  auction-master.eps \
		  arch-simpel.fig battleships.eps zeeslag.fig \
		  Guide.ps.gz \
		  adapters.tex \
		  classes

all:    ${DOCUMENTS}

Arch.tex: Arch.pic
	tpic Arch
Tifs.tex: Tifs.pic
	tpic Tifs
Tool.tex: Tool.pic
	tpic Tool

Adapter.tex: Adapter.pic
	tpic Adapter

Guide.ps.gz: Arch.tex Tifs.tex Tool.tex Adapter.tex  Guide.tex adapters.tex
	@TEXINPUTS=$$TEXINPUTS:`pwd`/adapters; \
	export TEXINPUTS; \
	latex Guide.tex; \
	latex Guide.tex
	dvips -o Guide.ps Guide.dvi
	rm -f Guide.ps.Z Guide.ps.gz
	gzip Guide.ps

Intro.ps: Intro.tex calc.ps auction.ps
	latex Intro.tex
	latex Intro.tex
	dvips -o Intro.ps Intro.dvi 

pamflet.ps: pamflet.tex arch-simpel.ps battleships.eps zeeslag.ps
	latex pamflet.tex
	latex pamflet.tex
	dvips -o pamflet.ps  pamflet.dvi

arch-simpel.ps: arch-simpel.fig
	fig2dev -Lps arch-simpel.fig arch-simpel.ps

zeeslag.ps: zeeslag.fig
	fig2dev -Lps zeeslag.fig zeeslag.ps

calc.ps: calc.fig
	fig2dev -Lps calc.fig calc.ps

auction.ps: auction.fig
	fig2dev -Lps auction.fig auction.ps

clean:
	${CLEAN} ${DOCUMENTS}

install: Guide.ps.Z

distclean: clean
	rm -f Makefile adapters.tex
	rm -rf adapters/*

dist: $(DISTFILES)
	@for file in $(DISTFILES); do \
	  ln $(srcdir)/$$file $(top_srcdir)/../$(PRODUCT)-$(VERSION)/doc 2> /dev/null \
	  || cp -r $(srcdir)/$$file $(top_srcdir)/../$(PRODUCT)-$(VERSION)/doc; \
	done
	mkdir $(top_srcdir)/../$(PRODUCT)-$(VERSION)/doc/adapters
	mkdir $(top_srcdir)/../$(PRODUCT)-$(VERSION)/doc/src
#	cp $(srcdir)/src/README \
# 		$(top_srcdir)/../$(PRODUCT)-$(VERSION)/doc/src/README

