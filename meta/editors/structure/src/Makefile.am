# $Id$

include $(top_srcdir)/make_rules

EXTRA_DIST = structure-editor.idef

bin_PROGRAMS = se
lib_LIBRARIES = libStructure.a
pkgdata_DATA = structure-editor.idef

noinst_HEADERS = \
	EditorData.h \
	EditorData_dict.h \
	area.h \
	editor.h \
	focus.h \
	length.h \
	path.h \
	structure-editor.tif.h \
	sort.h \
	tree.h

se_SOURCES = \
	structure-editor.tif.c \
	se.c \
	area.c \
	editor.c \
	focus.c \
	path.c \
	sort.c \
	tree.c \
	length.c

se_LDADD = \
	-L$(top_builddir)/editors/structure/src -lStructure \
	-L$(PT_SUPPORT)/lib -lmept \
	-L$(TOOLBUSLIB)/lib -lATB \
	-L$(ERROR_SUPPORT)/lib -lErrorAPI \
	-L$(ATERM)/lib -lATerm \
	$(SOCKLIBS)

INCLUDES = \
	-I$(PT_SUPPORT)/include \
	-I$(ERROR_SUPPORT)/include \
	-I$(ATERM)/include \
	-I$(TOOLBUSLIB)/include

libStructure_a_SOURCES = \
	EditorData.c EditorData_dict.c

# Only useful for maintainers having 'apigen'
api: EditorData.adt
	upgrade-adt -i $< -o $<.1
	adt-to-c \
	--compat-term \
	--prefix SE_  \
	--prologue EditorData.pro  \
	--input $<.1
