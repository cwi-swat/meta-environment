module Expr2

exports
  sorts E 

  lexical syntax
    [0-9]+ -> E
    [\ \n] -> LAYOUT 

  context-free restrictions
    LAYOUT? -/- [\ \n]

  context-free syntax
    E "+" E   -> E {left}
    E "-" E   -> E {non-assoc}
    E "*" E   -> E {left}
    E "/" E   -> E {non-assoc}
    E "^" E   -> E {right}
    "(" E ")" -> E {bracket}

context-free  priorities
   E "^" E -> E > 
   {non-assoc: E "*" E -> E  
               E "/" E -> E} >
   {left: E "+" E -> E  
          E "-" E -> E}
