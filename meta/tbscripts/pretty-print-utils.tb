#ifndef __PRETTY_PRINT_UTILS__
#define __PRETTY_PRINT_UTILS__

#include <pandora.idef>

process PrettyPrint(Path : str,
		    Tree : term, 
		    Result : term?) is
let
  Id : int,
  Feedback: term
in
  Id := process-id
  . snd-note(ui-status(stat(Id, "Pretty printing...")))
  . snd-msg(pretty-print(Tree))
  .
  (
    rec-msg(pretty-print-result(Result?))
    . AnnotateTree(Result, Path, Result?)
  +
    rec-msg(pretty-print-error(Feedback?))
    . Result := UNDEFINED
  )
  . snd-note(ui-status(endstat(Id)))
endlet

#endif /* __PRETTY_PRINT_UTILS__ */
