#!/bin/sh
# $Id$

prefix=@prefix@
exec_prefix=@exec_prefix@
bindir=${exec_prefix}/bin
libdir=${exec_prefix}/lib

PATH="$PATH:$bindir"

case $# in
	0)
		exit ;;
	*)
		case $1 in
		"-p")
			EXTRAS="$EXTRAS -Gpage=8,11.8 -Gmargin=.25,.25"
			shift ;;
		"-s")
			EXTRAS="$EXTRAS -Gsize=8,11.8"
			shift ;;
		esac
esac

#EXTRAS="$EXTRAS -Gconcentrate=true"
DOTCMD="dot -Tps							\
	  -Granksep=.36 $EXTRAS						\
	  -Gcenter=true -Gratio=auto 					\
	  -Nshape=plaintext -Nfontname=Helvetica-Bold			\
	  -Nfontsize=10 -Nheight=.25"


# echo Dot command: $DOTCMD

for f in $*
do
	o=`dirname $f`/`basename $f .dot`.ps
	# PS interprets '\' too, but dot doesn't escape them
	# Note: because '\' is the dot escape too, it occurs as `\\'
	perl -p -e 's#\\\\#\\\\\\\\$1#g;' < $f				|
	$DOTCMD								> $o
done
