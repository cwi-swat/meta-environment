#! /bin/sh

# $Id$

toolbus=__bindir__/toolbus
datadir=__datadir__

call_toolbus () {
  script=$1
  result=`${toolbus} -I${datadir} ${script} 2>&1`
  if echo $result | grep -iq failed; then
    echo ${result}
    exit 1
  else
    echo -n "."
  fi
}

# Test 1. Check whether a non-existing sdf2 module exists.
call_toolbus in-output-test-1.tb

# Test 2. Check whether an existing sdf2 module (in ascii) exists.
call_toolbus in-output-test-2.tb

# Test 3. Check whether an existing sdf2 module (in baf) exists.
call_toolbus in-output-test-3.tb

# Test 4. Attempt to create an empty sdf2 module.
rm -f EmptySdf2Module.sdf2
call_toolbus in-output-test-4.tb
rm -f EmptySdf2Module.sdf2

# Test 5. Attempt to create an empty equations section.
rm -f EmptyEqsSection.eqs
call_toolbus in-output-test-5.tb
rm -f EmptyEqsSection.eqs

echo ""
