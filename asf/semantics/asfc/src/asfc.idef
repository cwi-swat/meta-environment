/* $Id$ */

process Asfc is
let
  COM           : asfc,
  OutputDir     : str,
  ModuleName    : str,
  Syntax        : term,
  Equations     : term 
in
  /* Start the compiler */
  OutputDir := ".".
  (
    rec-msg(compiler-output-dir(OutputDir?))
  +
    rec-msg(compile-module(ModuleName?, Syntax?, Equations?)) .
    execute(asfc, COM?) .
    snd-eval(COM, compile-module(ModuleName, Syntax, Equations, OutputDir)) .
    rec-value(COM, compilation-done) .
    snd-msg(compilation-done(ModuleName)).
    snd-terminate(COM,"done").
    Syntax := none.
    Equations := none
  ) *
  delta
endlet

tool asfc is { command = "asfc -print-gc-info -termtable 20" }
