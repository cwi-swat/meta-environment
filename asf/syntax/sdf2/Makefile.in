# $Id$

# Configure variable substitutions
PRODUCT		= @PRODUCT@
VERSION		= @VERSION@

@SET_MAKE@

srcdir		= @srcdir@
VPATH		= @srcdir@
top_srcdir	= @top_srcdir@
prefix		= @prefix@
exec_prefix	= @exec_prefix@
bindir		= @bindir@
libdir		= @libdir@
includedir	= @includedir@
datadir		= @datadir@

RANLIB		= @RANLIB@
SHELL		= @SHELL@
CC              = @CC@
CFLAGS          = @CFLAGS@ ${XCFLAGS}
CPP             = @CPP@
CPPFLAGS        = @CPP@ ${XCPPFLAGS}
DEFS            = @DEFS@ ${XDEFS}
INCLUDES        = @INCLUDES@ ${XINCLUDES}
LIBS            = @LIBS@ ${XLIBS}
SOCKLIBS        = @SOCKLIBS@

INSTALL		= @INSTALL@
INSTALL_DATA	= @INSTALL_DATA@
INSTALL_PROG	= @INSTALL_PROG@
UNINSTALL	= @UNINSTALL@

AR              = @AR@

ATERM		= @ATERM@
ATERMBIN	= @ATERMBIN@
ATERMLIB	= @ATERMLIB@
ATERMINC	= @ATERMINC@
TOOLBUS		= @TOOLBUS@
TOOLBUSBIN	= @TOOLBUSBIN@
TOOLBUSLIB	= @TOOLBUSLIB@
TOOLBUSINC	= @TOOLBUSINC@

SGLR=../../sglr/sglr/sglr
TABLEGEN=../../pgen/pgen/pgen/parsetablegen

# Implicit rules
include ${top_srcdir}/implicit-rules

# The eXtra parts of some variables
XCFLAGS         =
XCPPFLAGS       =
XINCLUDES       =
XLIBS           =

BINFILES	= 
LIBFILES	= 
DATAFILES	= Sdf2.baf
INCLUDEFILES	=

# CLEANFILES are removed by 'make clean'
CLEANFILES      = Sdf2.baf Sdf2.tbl.asfix

# DISTCLEANFILES are removed by 'make distclean'
DISTCLEANFILES  =

all:	${BINFILES} ${LIBFILES} ${DATAFILES}

# Unit test target
test:	all
	test-grammar

%.baf : %.tbl.asfix
	$(TABLEGEN) < $< > $@
	
Sdf2.tbl.asfix : Sdf2-bootstrap.tbl Sdf2.sdf2
	$(SGLR) -p Sdf2-bootstrap.tbl -1 -i Sdf2.sdf2 -o $@

uninstall:
	@$(UNINSTALL) $(bindir) $(BINFILES)
	@$(UNINSTALL) $(libdir) $(LIBFILES)
	@$(UNINSTALL) $(includedir) $(INCLUDEFILES)
	@$(UNINSTALL) $(datadir) $(DATAFILES)

install:	all
	mkdir -p $(datadir)
	@$(INSTALL_DATA) $(INSTALL) $(datadir) $(DATAFILES)

# clean target (remove all easily build components and temporary files)
clean:
	rm -f *.o *~ $(CLEANFILES)
doc:

distclean:

depend:


test-grammar:
	test-grammar	
