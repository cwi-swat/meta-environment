module basic/RStores

exports 

imports basic/NatCon
imports basic/StrCon
imports basic/Locations

sorts RElem RStore RType RTuple

%% This module defines a syntax/API for stores of typed relations

context-free syntax

 "int" "(" int-value:NatCon ")"       -> RElem {cons("int")}
 "str" "(" str-value:StrCon ")"       -> RElem {cons("str")}
 "loc" "(" location:Location ")"      -> RElem {cons("location")}
 "set"   "(" "[" {RElem ","}* "]" ")" -> RElem {cons("set")}
 "bag"   "(" "[" {RElem ","}* "]" ")" -> RElem {cons("bag")}
 "tuple" "(" "[" {RElem ","}+ "]" ")" -> RElem {cons("tuple")}

 "int" 				      -> RType {cons("integer")}
 "str"				      -> RType {cons("str")}
 "loc"				      -> RType {cons("location")}
 "tuple" "(" "[" {RType ","}+ "]" ")" -> RType {cons("tuple")}
 "set"   "(" RType  ")"               -> RType {cons("set")}
 "bag"   "(" RType  ")"               -> RType {cons("bag")}
 "rel" "(" "[" {RType ","}* "]" ")"   -> RType {cons("rel")}
 "user" "(" StrCon ")"                -> RType {cons("user")} 
 "parameter" "(" StrCon ")"           -> RType {cons("parameter")}                                      

 "rtuple" "(" id:StrCon "," rtype:RType "," data:RElem ")" -> RTuple {cons("rtuple")}

 "rstore" "(" "[" { RTuple ","}* "]" ")" -> RStore {cons("rstore")}

hiddens
context-free start-symbols	
		RStore

