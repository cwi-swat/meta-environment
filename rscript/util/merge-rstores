#! /bin/sh

set -e
PREFIX=/home/paulk/research/relation-calculus
TABLE=$PREFIX/Rstore.trm.tbl
RSTORE=$PREFIX/Rstore
RESULT=result.rstore

echo -n "creating empty ${RESULT} .."
echo "rstore()" | sglr -p ${TABLE} -o ${RESULT}
echo " done."

for f in $*; do
  echo -n "merging $f into ${RESULT} .."
  $RSTORE -f merge-rstores -r RSTORE -i $f -i ${RESULT} -o ${RESULT}
  echo " done."
done

ls -l ${RESULT}
