/*
  $Id$
 */

tool parsetablegen is {
  command = "parsetablegen"
}


process PGen is
let
  GENTABLE  : parsetablegen,
  Syntax    : term,
  Name      : str,
  Extension : str,
  Table     : term
in
  (
    (
      rec-msg(generate-parsetable(Syntax?, eqs(Name?))) .
      Extension := "eqs.tbl"
    +
      rec-msg(generate-parsetable(Syntax?, trm(Name?))) .
      Extension := "trm.tbl"
    ) .
    execute(parsetablegen,GENTABLE?) .
    snd-eval(GENTABLE, generate-table(Syntax, Name, Extension)) .
    (
      rec-value(GENTABLE, generation-finished(Table?)) .
      snd-msg(parsetable(Table))
      +
      rec-value(GENTABLE, generation-failed).
      snd-msg(no-parsetable)
    ) .
    snd-terminate(GENTABLE, "done") .
    Syntax := none .
    Table := none
  )*
  delta
endlet
