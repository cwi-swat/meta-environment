AC_INIT
AC_CONFIG_SRCDIR([configure.in])
GLT_INIT_PACKAGE
AC_PREREQ(2.59)

AM_MAINTAINER_MODE

ACLOCAL="${ACLOCAL} -I ."

dnl Handle --with-cflags option
AC_ARG_WITH(cflags,
   [  --with-cflags=CFLAGS    standard options of c compiler],
   CFLAGS=${withval},
   if test "a${GCC}" = "ayes"; then
     CFLAGS="-Wall -g -O2"
   fi;
)
AC_SUBST(CFLAGS)

dnl Development mode
AC_ARG_WITH(develop,
   [  --with-develop          Enable development mode (extra dbg prints etc.)],
   DEVELOP_DEF=-DDEVELOP=1,
)
AC_SUBST(DEVELOP_DEF)

AC_PACKAGE_REQUIRE(aterm-java, aterm-java-config,
        [  --with-aterm-java=DIR  ATerm-Java-library is in DIR])
JAVA_ATERM=\`${ATERM_JAVA}/bin/aterm-java-config\`
AC_SUBST(JAVA_ATERM)

dnl Require Tide support library
AC_PACKAGE_REQUIRE(tide-support, tide-support-config,
   [  --with-tide-support=DIR      tide-support library is in DIR])
AC_SUBST(TIDE_SUPPORT)

dnl Require toolbus package
AC_PACKAGE_REQUIRE(toolbus, toolbus,
   [  --with-toolbus=DIR      Specify location of the ToolBus])
AC_SUBST(TOOLBUS)

dnl Require ToolBus Java Adapter
AC_PACKAGE_REQUIRE(toolbus-java-adapter, toolbus-java-adapter-config,
   [  --with-toolbus-java-adapter=DIR   ToolBus Java adapter is in DIR])
AC_SUBST(TOOLBUS_JAVA_ADAPTER)

dnl Require Meta Studio
AC_PACKAGE_REQUIRE(meta-studio, gui-config,
   [  --with-meta-studio=DIR   Meta Studio is in DIR])
AC_SUBST(META_STUDIO)

dnl Form CLASSPATH for external jars and classes
EXTERNAL_JARS=${JAVA_ATERM}:\`${TOOLBUS_JAVA_ADAPTER}/bin/toolbus-java-adapter-config\`:\`${META_STUDIO}/bin/gui-config\`
AC_SUBST(EXTERNAL_JARS)

AC_CONFIG_FILES([\
	Makefile \
	scripts/Makefile \
	toolbus/Makefile \
	images/Makefile \
	])
AC_OUTPUT
