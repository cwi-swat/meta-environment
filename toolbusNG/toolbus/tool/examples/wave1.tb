process P is
   let X : int 
   in
   X := 2 .
   printf("P start\n") .

   (  rec-msg(exc(X, 1))        %% receive amplitude of left neighbour
     || printf("P X = %t\n", X)
     || snd-msg(exc(1, X))
     
     ) .
      printf("P end, X = %t\n", X)
      endlet
      
 process Q is
 
   printf("Q start\n") .

   (  rec-msg(exc(1,2))
     || printf("Q\n")
     || snd-msg(exc(2,1))        %% receive amplitude of right neighbour
     ) .
      printf("Q end\n")

 toolbus(P, Q)