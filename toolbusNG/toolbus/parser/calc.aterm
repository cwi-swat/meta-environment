Tscript([ProcessDefinition0("UI",Iteration(Merge(Merge(Iteration(Alternative(ProcessCall("CALC-BUTTON",[]),ProcessCall("LOG-BUTTON",[])),Delta),Iteration(ProcessCall("TIME-BUTTON",[]),Delta)),ProcessCall("QUIT-BUTTON",[])),Delta)),ProcessDefinition0("CALC-BUTTON",LetDefinition([vardecl("E","expr"),vardecl("V","int")],Disrupt(Sequence(Sequence(Sequence(Sequence(Sequence(Event(apply("button",["calc"])),Eval("get-expr-dialog",resvar("E"))),SndMsg(apply("compute",[var("E")]))),RecMsg(apply("compute",[var("E"),resvar("V")]))),Do(apply("display-value",[var("V")]))),AckEvent(apply("button",["calc"]))),Sequence(RecMsg("cancel"),AckEvent(apply("button",["calc"])))))),ProcessDefinition0("LOG-BUTTON",LetDefinition([vardecl("N","int"),vardecl("L","log")],Sequence(Sequence(Sequence(Sequence(Event(apply("button",["showLog"])),SndMsg("showLog")),RecMsg(apply("showLog",[resvar("L")]))),Do(apply("display-log",[var("L")]))),AckEvent(apply("button",["calc"]))))),ProcessDefinition0("TIME-BUTTON",LetDefinition([vardecl("T","time"),vardecl("P","process")],Sequence(Sequence(Sequence(Sequence(Event(apply("button",["showTime"])),SndMsg("showTime",resvar("P"))),RecMsg(apply("showTime",[resvar("T")]),var("P"))),Do(apply("display-time",[var("T")]))),AckEvent("showTime")))),ProcessDefinition0("QUIT-BUTTON",Sequence(Event(apply("button",["quit"])),ShutDown("\"End of calc demo\""))),ProcessDefinition0("CALC",LetDefinition([vardecl("E","expr"),vardecl("V","int"),vardecl("P","process")],Iteration(Sequence(Sequence(Sequence(RecMsg(apply("compute",[resvar("E")]),resvar("P")),Eval(apply("compute",[var("E")]),resvar("V"))),SndMsg(apply("compute",[var("E"),var("V")]),var("P"))),SndNote(apply("compute",[var("E"),var("V")]))),Delta))),ProcessDefinition0("Clock",LetDefinition([vardecl("T","time"),vardecl("P","process")],Iteration(Sequence(Sequence(RecMsg("showTime",resvar("P")),Eval("readTime",resvar("T"))),SndMsg(apply("showTime",[var("T")]),var("P"))),Delta))),ProcessDefinition0("BATCH",LetDefinition([vardecl("E","expr"),vardecl("V","int")],Iteration(Sequence(Sequence(Sequence(Eval("fromFile",resvar("E")),SndMsg(apply("compute",[var("E")]))),RecMsg(apply("compute",[var("E"),resvar("V")]))),Do(apply("toFile",[var("E"),var("V")]))),Delta))),ProcessDefinition0("LOG",LetDefinition([vardecl("E","str"),vardecl("V","int"),vardecl("L","log"),vardecl("P","process")],Iteration(Alternative(Sequence(RecNote(apply("compute",[resvar("E"),resvar("V")])),Do(apply("writeLog",[var("E"),var("V")]))),Sequence(Sequence(RecMsg("showLog",resvar("P")),Eval("readLog",resvar("L"))),SndMsg(apply("readLog",[var("L")]),var("P")))),Delta)))],[ProcessCall("UI"),ProcessCall("CALC"),ProcessCall("LOG"),ProcessCall("CLOCK")])