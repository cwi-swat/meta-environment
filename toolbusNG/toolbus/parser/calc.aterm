Tscript([Processdefinition("UI",Iteration(Merge(Merge(Iteration(Alternative(ProcCall("CALC-BUTTON",[]),ProcCall("LOG-BUTTON",[])),Delta),Iteration(ProcCall("TIME-BUTTON",[]),Delta)),ProcCall("QUIT-BUTTON",[])),Delta)),Processdefinition("CALC-BUTTON",LetDefinition([vardecl("E","expr"),vardecl("V","int")],Disrupt(Sequence(Sequence(Sequence(Sequence(Sequence(Event(appl("button",["calc"])),Eval("get-expr-dialog",resvar("E"))),SndMsg(appl("compute",[var("E")]))),RecMsg(appl("compute",[var("E"),resvar("V")]))),Do(appl("display-value",[var("V")]))),AckEvent(appl("button",["calc"]))),Sequence(RecMsg("cancel"),AckEvent(appl("button",["calc"])))))),Processdefinition("LOG-BUTTON",LetDefinition([vardecl("N","int"),vardecl("L","log")],Sequence(Sequence(Sequence(Sequence(Event(appl("button",["showLog"])),SndMsg("showLog")),RecMsg(appl("showLog",[resvar("L")]))),Do(appl("display-log",[var("L")]))),AckEvent(appl("button",["calc"]))))),Processdefinition("TIME-BUTTON",LetDefinition([vardecl("T","time"),vardecl("P","process")],Sequence(Sequence(Sequence(Sequence(Event(appl("button",["showTime"])),SndMsg("showTime",resvar("P"))),RecMsg(appl("showTime",[resvar("T")]),var("P"))),Do(appl("display-time",[var("T")]))),AckEvent("showTime")))),Processdefinition("QUIT-BUTTON",Sequence(Event(appl("button",["quit"])),ShutDown("\"End of calc demo\""))),Processdefinition("CALC",LetDefinition([vardecl("E","expr"),vardecl("V","int"),vardecl("P","process")],Iteration(Sequence(Sequence(Sequence(RecMsg(appl("compute",[resvar("E")]),resvar("P")),Eval(appl("compute",[var("E")]),resvar("V"))),SndMsg(appl("compute",[var("E"),var("V")]),var("P"))),SndNote(appl("compute",[var("E"),var("V")]))),Delta))),Processdefinition("Clock",LetDefinition([vardecl("T","time"),vardecl("P","process")],Iteration(Sequence(Sequence(RecMsg("showTime",resvar("P")),Eval("readTime",resvar("T"))),SndMsg(appl("showTime",[var("T")]),var("P"))),Delta))),Processdefinition("BATCH",LetDefinition([vardecl("E","expr"),vardecl("V","int")],Iteration(Sequence(Sequence(Sequence(Eval("fromFile",resvar("E")),SndMsg(appl("compute",[var("E")]))),RecMsg(appl("compute",[var("E"),resvar("V")]))),Do(appl("toFile",[var("E"),var("V")]))),Delta))),Processdefinition("LOG",LetDefinition([vardecl("E","str"),vardecl("V","int"),vardecl("L","log"),vardecl("P","process")],Iteration(Alternative(Sequence(RecNote(appl("compute",[resvar("E"),resvar("V")])),Do(appl("writeLog",[var("E"),var("V")]))),Sequence(Sequence(RecMsg("showLog",resvar("P")),Eval("readLog",resvar("L"))),SndMsg(appl("readLog",[var("L")]),var("P")))),Delta)))],[ProcCall("UI"),ProcCall("CALC"),ProcCall("LOG"),ProcCall("CLOCK")])