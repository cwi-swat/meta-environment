# $Id$

data_DATA = moduleapi.jar

EXTRA_DIST = moduleapi.jar

if MAINTAINER_MODE
MODULE_MODULES = Modules NatCon

api: module-api

ABS_MODULE_MODULES = \
	$(foreach i, \
	${MODULE_MODULES}, \
	${top_srcdir}/../sdf-library/library/basic/$i.sdf)

MetaModules.def: Makefile
	@(echo "definition"; cat ${ABS_MODULE_MODULES}) > $@

module-api: java-module-api

java-module-api: MetaModules.def Makefile
	sdf2-to-java \
		--imploded \
		--visitable \
		--input $< \
		--package nl.cwi.sen1 \
		--name moduleapi \
		--output . \
		--version ${VERSION}
	mv moduleapi-${VERSION}.jar moduleapi.jar
endif
